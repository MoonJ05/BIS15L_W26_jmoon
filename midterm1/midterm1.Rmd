---
title: "Midterm 1 W26"
author: "Jina Moon"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
---

## Instructions
Answer the following questions and complete the exercises in RMarkdown. Please embed all of your code and push your final work to your repository. Your code must be organized, clean, and run free from errors. Remember, you must remove the `#` for any included code chunks to run. Be sure to add your name to the author header above. 

Your code must knit in order to be considered. If you are stuck and cannot answer a question, then comment out your code and knit the document. You may use your notes, labs, and homework to help you complete this exam. Do not use any other resources- including AI assistance or other students' work.  

Don't forget to answer any questions that are asked in the prompt! Each question must be coded; it cannot be answered by a sort in a spreadsheet or a written response only.  

For all plots you create, a title and clearly labeled axes must be provided. We also expect pipes `%>%` to be used wherever possible.  

Be sure to push your completed midterm to your repository and upload the document to Gradescope. This exam is worth 50 points.  

Please load the following libraries.
```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
```

## Part 1: Repository

**Question 1. (3 points) Before you start analyzing data, please put a link to your GitHub repository below. Your repository should have a clear README and be well-organized. Add `jmledford3115` and `bryshalm` as collaborators to your repository if you haven't already done so.**  

Link to repository:

https://github.com/MoonJ05/BIS15L_W26_jmoon.git <- Link to my repository 

Sent request to add as collaborator to both (done)

## Part 2: Data and Analysis

In the midterm 1 folder there is a second folder called `data`. Inside the `data` folder, there is a .csv file called `anolis_dat.csv`. These data came from [D. Luke Mahler, Liam J. Revell, Richard E. Glor, Jonathan B. Losos, ECOLOGICAL OPPORTUNITY AND THE RATE OF MORPHOLOGICAL EVOLUTION IN THE DIVERSIFICATION OF GREATER ANTILLEAN ANOLES, Evolution, Volume 64, Issue 9, 1 September 2010, Pages 2731â€“2745](https://academic.oup.com/evolut/article/64/9/2731/6854302?login=true). The original research article is included in the data folder.  

_Anolis_ is a genus of lizards commonly known as anoles. Anoles are found throughout the Americas, but are especially diverse in the Caribbean. The data include morphological measurements for _Anolis_ lizards from the islands of the Greater Antilles. These data can be used to study patterns of morphological evolution and adaptation in _Anolis_ lizards.  

The variables include:  
- `species`: Species name of the anole lizard.    
- `habitat`: Habitat type where the lizard was found.  
- `hindlimb_length_mm`: Length of the lizard's hindlimbs (in millimeters).  
- `tail_length_mm `: Length of the lizard's tail (in millimeters).    
- `body_length_mm`: Length of the lizard's body (in millimeters).   
- `toepad_lamellae_count`: Count of lamellae on the lizard's toepads.  
- `island`: Island where the lizard was found.  

**Question 2. (2 points) Load the data and store it as an object called `anolis`.**

```{r}
getwd() #checking my working directory 
anolis <- read.csv("data/anolis_dat.csv") #load data and store 
```

**Question 3. (2 points) Use a summary function of your choice to get an idea of the structure of the data.**

```{r}
glimpse (anolis) 
```


**Question 4. (2 points) Clean the variable names so they are all lowercase and without special characters or spaces. Be sure to use the cleaned data for all subsequent analyses.**

```{r}

anolis_cleaned <- anolis %>% clean_names() #cleans variable names 
names(anolis_cleaned) #double checking changes 

```


**Question 5. (4 points) Convert the `habitat` and `island` variables to factors.**

```{r}
anolis_cleaned <- anolis_cleaned %>% 
  mutate(across(c(habitat, island), as.factor))
glimpse(anolis_cleaned) #making sure correct conversions happened 
```

**Question 6. (2 points) Anole species were sampled from multiple islands. Which islands are represented in the data? Display the island names.**

```{r}
anolis_cleaned %>% 
  distinct(island) #outputs distinct island names
```

The islands represented in the data are Cuba, Hispaniola, Puerto Rico, and Jamacia 

**Question 7. (4 points) Is sampling equal across islands? Create a plot to visualize the number of anole species sampled from each island. Be sure to label your axes and add a title.**

```{r}
#bar plot with count 
anolis_cleaned %>% 
  count(island) %>% 
  ggplot(mapping = aes(x=island, y=n)) + #count(island) gives n 
  geom_col(mapping = aes(fill = island)) + #using geom_col instead of geom_bar since specified y as n (could've done the other way too)
  labs(title = "Sample Count Across Islands", x = "Island", y = "Count", fill = "Islands")

```

Sampling is NOT equal across islands, with Jamacia have less than 5 samples while Cuba has moer than 20 samples. 


**Question 8. (2 points) Which habitat types are represented in the data? Display the names of the habitat types.**

```{r}
names (anolis_cleaned) #checking variable name 
anolis_cleaned %>% 
  distinct(habitat) #outputs distinct habitat names
```

The habitat types represented in the data are Trunk-ground, Twig, Grass-bush, and Trunk-crown. 

**Question 9. (4 points) Is sampling equal across habitat types? Create a plot to visualize the number of anole species sampled from each habitat type. Be sure to label your axes and add a title.**

```{r}

anolis_cleaned %>% 
  count(habitat) %>% 
  ggplot(mapping = aes(x=habitat, y=n)) + #count(island) gives n 
  geom_col(mapping = aes(fill = habitat)) + #using geom_col instead of geom_bar since specified y as n (could've done the other way too)
  labs(title = "Sample Count Across Habitats", x = "Habitat", y = "Count", fill = "Habitat")

```

No, sampling is NOT equal across Habitats with ranges of 5 to above 20 samples from each habitat. 


**Question 10. (4 points) The morphology of anoles varies based on their habitat. How does the range of hindlimb length compare among different habitats? Create a plot to visualize the distribution of hindlimb lengths across habitat types. Be sure to label your axes and add a title.**

```{r}
names(anolis_cleaned)
#comparing hindlimb (continous) to habitat (categorical) .. so box plot! 
ggplot (data=anolis_cleaned, 
	mapping=aes(x=habitat, y=hindlimb_length_mm)) + 
	geom_boxplot(mapping=aes(fill = habitat)) +
	labs (title = "Hindlimb Length (mm) vs. Habitat", x= "Habitat", y = "Hindlimb Length (mm)", fill = "Habitat") 
```

There are differing ranges of hindlimb length between habitats. Specifically, The Trunk-ground habitat seems to have the largest range of over 20 mm (at a higher median), while the Twig habitat only seems to have about 5 mm range difference for the hindlimb length of the anoles (with a lower median). 


**Question 11. (4 points) The plot above is compelling, but don't we expect larger lizards to have longer limbs? What about tail length? Shouldn't longer lizards have longer tails? To correct for this, make two new columns: 1. `ratio_of_hindlimb_to_body`, and 2. `ratio_of_tail_to_body`. Don't forget to add these columns to the anolis data frame.**

```{r}
names(anolis_cleaned)
anolis_updated <- anolis_cleaned %>% #save changes to new data frame 
  mutate(ratio_of_hindlimb_to_body = hindlimb_length_mm / body_length_mm, #created ratio_of_hindlimb_to_body column 
         ratio_of_tail_to_body = tail_length_mm / body_length_mm) #created ratio_of_tail_to_body column

glimpse (anolis_updated) #check for new columns
```

**Question 12. (4 points) Create a new plot that examines the distribution of `ratio_of_hindlimb_to_body` across habitat types. How does this plot differ from the one you made in Problem 10?  Be sure to label your axes and add a title.**

```{r}
#ratio of hindlimb to body (continous) vs. habitat (categorical)... box plot. 
ggplot (data = anolis_updated, 
	mapping=aes(x=habitat, y=ratio_of_hindlimb_to_body)) + 
	geom_boxplot(mapping=aes(fill = habitat)) +
	labs (title = "Hindlimb to Body Ratio vs. Habitat", x= "Habitat", y = "Hindlimb to Body Ratio", fill = "Habitat") 

```

The Trunk-ground and Twig are still similar in that they are at the top and bottom range of the spectrum respectably. However, the anoles found in the Grass-bush habitat seem to have a higher hindlimb to body ratio than the Trunk-crown habitat anoles even though they had shorter hindlimbs length in the previous graph (problem 10). This suggests that the hindlimbs for the anoles found in the Grass-bush habitat are actually longer relative to their bodylength than the Trunk-crown anoles. 


**Problem 13. (4 points) A longer tail provides better balance and agility. Create a plot that examines the relationship between body length and tail length. Color the points by habitat type and add a line of best fit. What does this plot suggest about the relationship between body length and tail length? What do you notice about lizards in the `Grass-bush` habitat? Be sure to label your axes and add a title.**

```{r}
#scatter plot of body_length_mm vs. tail_length_mm 
#Scatter plots (continuous vs. continuous) 
ggplot (data = anolis_updated, 
        mapping=aes(x=body_length_mm, y=tail_length_mm)) + 
  geom_point (na.rm = T, mapping = aes (color = habitat, shape=habitat)) + #colored and shaped points by habitat type 
  geom_smooth (method = lm, se = T) + #linear model of best fit 
  labs (title = "Body Length (mm) vs. Tail Length (mm)", x = "Body Length (mm)", y = "Tail Length (mm)")
```

There seems to be a positive relationship between body length and tail length. This seems to also be true for the Grass-bush anoles. The Grass-bush anoles seem to have smaller body length compared to the other anoles, but also longer tail lengths in comparison to the other habitat anoles in the same body length range (as indicated by the Grass-bush sample points mostly being above the line of best fit).


**Problem 14. (4 points) Toepad lamellae are transverse, plate-like structures found on the ventral surface of the digits. They are a key adaptation that allows anoles to cling to and move efficiently on smooth and vertical surfaces. What is the mean number of toepad lamellae for each habitat type?**

```{r}
#habitat types represented in the data are Grass-bush, Trunk-crown, Trunk-ground, and Twig 

#mean toepad_lamellae_count for Grass-bush
anolis_updated %>% 
  filter(habitat=="Grass-bush") %>% 
  summarize(mean_toepad_lamellae_count_grass_bush = mean(toepad_lamellae_count))

#mean toepad_lamellae_count for Trunk-crown
anolis_updated %>% 
  filter(habitat=="Trunk-crown") %>% 
  summarize(mean_toepad_lamellae_count_trunk_crown = mean(toepad_lamellae_count))

#mean toepad_lamellae_count for Trunk-ground
anolis_updated %>% 
  filter(habitat=="Trunk-ground") %>% 
  summarize(mean_toepad_lamellae_count_trunk_ground = mean(toepad_lamellae_count))

#mean toepad_lamellae_count for Twig
anolis_updated %>% 
  filter(habitat=="Twig") %>% 
  summarize(mean_toepad_lamellae_count_twig = mean(toepad_lamellae_count))
```

**Problem 15. (5 points) The number of toepad lamellae is significantly different for trunk-crown species. But, is this consistent across all islands? Make a plot that shows the range in number of toepad lamellae by island for trunk-crown species only. Be sure to label your axes and add a title.**

```{r}
anolis_updated %>% 
  filter(habitat=="Trunk-crown") %>% #data with only trunk-crown species 
  ggplot (mapping=aes(x=island, y=toepad_lamellae_count)) + 
	geom_boxplot(mapping=aes(fill = island)) +
	labs (title = "Trunk-crown Species: Island vs. Toepad Lamellae count", x= "Island", y = "Toepad Lamellae count", fill = "Island") 
```

No, not all trunk-crown species on every island is significantly different in toepad lamellae count compared to the anoles found in other habitats. Specifically, Puerto Rico trunk-crown anoles seem to have less than 35 Toepad Lammellae count which isn't as significantly different to the other habitat anoles, whereas the Cuba trunk-crown anoles seems to be bringing up the average by a significant difference. 

## Submit the Midterm
1. Save your work and knit the .rmd file.  
2. Open the .html file and "print" it to a .pdf file in Google Chrome (not Safari).    
3. Go to the class Canvas page and open Gradescope.  
4. Submit your .pdf file to the midterm assignment- be sure to assign the pages to the correct questions.  
5. Commit and push your work to your repository. 